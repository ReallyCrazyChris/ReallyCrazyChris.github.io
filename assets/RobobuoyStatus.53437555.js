import{T as ve,a as be,Q as J}from"./TouchPan.27e91361.js";import{h as B,c as I,m as s,g as Z,_ as V,r as Q,y as m,z as v,A as n,D as b,I as S,B as l,C as N,ad as ee,w as fe,Q as _e,P as he,x as z}from"./index.42812f5f.js";import{Q as $,l as ge,n as ye}from"./QTooltip.1f8b247f.js";import{i as Se,j as ke,Q as _}from"./QBtn.ca994b32.js";import{Q as L,a as xe}from"./QCard.e7148a45.js";import{a as T}from"./bluetooth.98a73b45.js";import{d as Ce,b as we,a as Me}from"./render.8e3a34e1.js";import{d as G,n as X}from"./format.28d27562.js";const pe=B("div",{class:"q-space"});var Be=I({name:"QSpace",setup(){return()=>pe}});const O={...Se,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},H=50,te=2*H,oe=te*Math.PI,ze=Math.round(oe*1e3)/1e3;var re=I({name:"QCircularProgress",props:{...O,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:o}){const{proxy:{$q:i}}=Z(),t=ke(e),u=s(()=>{const d=(i.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(i.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-d}deg)`:`rotate3d(0, 0, 1, ${d-90}deg)`}}),r=s(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),c=s(()=>te/(1-e.thickness/2)),k=s(()=>`${c.value/2} ${c.value/2} ${c.value} ${c.value}`),h=s(()=>G(e.value,e.min,e.max)),x=s(()=>e.max-e.min),M=s(()=>e.thickness/2*c.value),C=s(()=>{const d=(e.max-h.value)/x.value,g=e.rounded===!0&&h.value<e.max&&d<.25?M.value/2*(1-d/.25):0;return oe*d+g});function P({thickness:d,offset:g,color:F,cls:R,rounded:U}){return B("circle",{class:"q-circular-progress__"+R+(F!==void 0?` text-${F}`:""),style:r.value,fill:"transparent",stroke:"currentColor","stroke-width":d,"stroke-dasharray":ze,"stroke-dashoffset":g,"stroke-linecap":U,cx:c.value,cy:c.value,r:H})}return()=>{const d=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&d.push(B("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:H-M.value/2,cx:c.value,cy:c.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&d.push(P({cls:"track",thickness:M.value,offset:0,color:e.trackColor})),d.push(P({cls:"circle",thickness:M.value,offset:C.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const g=[B("svg",{class:"q-circular-progress__svg",style:u.value,viewBox:k.value,"aria-hidden":"true"},d)];return e.showValue===!0&&g.push(B("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},o.default!==void 0?o.default():[B("div",h.value)])),B("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:t.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:h.value},Ce(o.internal,g))}}});const Ne={name:"MarkNumber",props:["number"],components:{},data(){return{indicatorthickness:10}},setup(e){return{roboStore:T(e.deviceid),nodusedmodel:Q(10)}},computed:{heading(){return this.roboStore.currentcourse-Math.round(this.indicatorthickness/2)}}},Ve={class:"column items-center justify-end"},$e={class:""};function Pe(e,o,i,t,u,r){return m(),v(re,{"show-value":"",class:"text-white generic-hover-transition",size:"2.5em",color:t.roboStore.color,"center-color":t.roboStore.color,"track-color":"transparent","font-size":"0.5em",thickness:0,min:0,max:360,"model-value":t.nodusedmodel,value:u.indicatorthickness,angle:r.heading},{default:n(()=>[b("div",Ve,[b("div",$e,S(t.roboStore.number),1)]),l($,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:n(()=>[N(S(t.roboStore.name),1)]),_:1})]),_:1},8,["color","center-color","model-value","value","angle"])}var qe=V(Ne,[["render",Pe]]);const Qe={name:"BatteryStatus",props:["battery"],setup(e){return{}},computed:{battery_icon:function(e){return e.battery>90?"battery_full":e.battery>70?"battery_6_bar":e.battery>60?"battery_5_bar":e.battery>50?"battery_4_bar":e.battery>40?"battery_3_bar":e.battery>30?"battery_2_bar":e.battery>20?"battery_1_bar":e.battery>10?"battery_0_bar":"battery_alert"},battery_icon_color:function(e){return e.battery>60?"green":e.battery>40?"warning":e.battery>20?"red":"pink"},battery_animation:function(e){return e.battery>30?"":"blinking"}}};function Te(e,o,i,t,u,r){return m(),v(_,{flat:"",round:"",dense:"",class:ee(r.battery_animation),color:r.battery_icon_color,icon:r.battery_icon},{default:n(()=>[l($,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:n(()=>[N("Battery "+S(i.battery)+"%",1)]),_:1})]),_:1},8,["class","color","icon"])}var Fe=V(Qe,[["render",Te]]);const Ae={name:"GPSStatus",props:["positionvalid"],setup(){return{}}};function je(e,o,i,t,u,r){return i.positionvalid?(m(),v(_,{key:0,flat:"",round:"",dense:"",color:"green",icon:"gps_fixed"},{default:n(()=>[l($,{class:"bg-dark",anchor:"top middle",self:"bottom middle"},{default:n(()=>[N("GPS Available")]),_:1})]),_:1})):(m(),v(_,{key:1,dense:"",round:"",color:"red",icon:"gps_not_fixed"},{default:n(()=>[l($,{class:"bg-dark",color:"green",anchor:"top middle",self:"bottom middle"},{default:n(()=>[N("No GPS")]),_:1})]),_:1}))}var Ge=V(Ae,[["render",je]]);const Ie={name:"SignalStatus",props:["signalstrength"],setup(){return{}},computed:{signalstrength_icon:function(e){return e.signalstrength>-80?"wifi":e.signalstrength>-95?"wifi_2_bar":"wifi_1_bar"},signalstrength_icon_color:function(e){return e.signalstrength>-80?"green":e.signalstrength>-95?"orange":"red"}}};function Re(e,o,i,t,u,r){return m(),v(_,{flat:"",round:"",dense:"",color:r.signalstrength_icon_color,icon:r.signalstrength_icon},{default:n(()=>[l($,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:n(()=>[N(S(i.signalstrength)+"dBm",1)]),_:1})]),_:1},8,["color","icon"])}var Ue=V(Ie,[["render",Re]]);const Y=[34,37,40,33,39,38],De=Object.keys(O);var E=I({name:"QKnob",props:{...ge,...O,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(e,{slots:o,emit:i}){const{proxy:t}=Z(),{$q:u}=t,r=Q(e.modelValue),c=Q(!1),k=s(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),h=s(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax);let x;function M(){r.value=e.modelValue===null?k.value:G(e.modelValue,k.value,h.value),A(!0)}fe(()=>`${e.modelValue}|${k.value}|${h.value}`,M),M();const C=s(()=>e.disable===!1&&e.readonly===!1),P=s(()=>"q-knob non-selectable"+(C.value===!0?" q-knob--editable":e.disable===!0?" disabled":"")),d=s(()=>(String(e.step).trim().split(".")[1]||"").length),g=s(()=>e.step===0?1:e.step),F=s(()=>e.instantFeedback===!0||c.value===!0),R=u.platform.is.mobile===!0?s(()=>C.value===!0?{onClick:W}:{}):s(()=>C.value===!0?{onMousedown:se,onClick:W,onKeydown:ie,onKeyup:ue}:{}),U=s(()=>C.value===!0?{tabindex:e.tabindex}:{[`aria-${e.disable===!0?"disabled":"readonly"}`]:"true"}),ae=s(()=>{const a={};return De.forEach(y=>{a[y]=e[y]}),a});function ne(a){a.isFinal?(q(a.evt,!0),c.value=!1):(a.isFirst&&(D(),c.value=!0),q(a.evt))}const le=s(()=>[[ve,ne,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function D(){const{top:a,left:y,width:p,height:j}=t.$el.getBoundingClientRect();x={top:a+j/2,left:y+p/2}}function se(a){D(),q(a)}function W(a){D(),q(a,!0)}function ie(a){if(!Y.includes(a.keyCode))return;_e(a);const y=([34,33].includes(a.keyCode)?10:1)*g.value,p=[34,37,40].includes(a.keyCode)?-y:y;r.value=G(parseFloat((r.value+p).toFixed(d.value)),k.value,h.value),A()}function q(a,y){const p=he(a),j=Math.abs(p.top-x.top),me=Math.sqrt(j**2+Math.abs(p.left-x.left)**2);let f=Math.asin(j/me)*(180/Math.PI);p.top<x.top?f=x.left<p.left?90-f:270+f:f=x.left<p.left?f+90:270-f,u.lang.rtl===!0?f=X(-f-e.angle,0,360):e.angle&&(f=X(f-e.angle,0,360)),e.reverse===!0&&(f=360-f);let w=e.min+f/360*(e.max-e.min);if(g.value!==0){const K=w%g.value;w=w-K+(Math.abs(K)>=g.value/2?(K<0?-1:1)*g.value:0),w=parseFloat(w.toFixed(d.value))}w=G(w,k.value,h.value),i("dragValue",w),r.value!==w&&(r.value=w),A(y)}function ue(a){Y.includes(a.keyCode)&&A(!0)}function A(a){e.modelValue!==r.value&&i("update:modelValue",r.value),a===!0&&i("change",r.value)}const ce=ye(e);function de(){return B("input",ce.value)}return()=>{const a={class:P.value,role:"slider","aria-valuemin":k.value,"aria-valuemax":h.value,"aria-valuenow":e.modelValue,...U.value,...ae.value,value:r.value,instantFeedback:F.value,...R.value},y={default:o.default};return C.value===!0&&e.name!==void 0&&(y.internal=de),we(re,a,y,"knob",C.value,()=>le.value)}}});const Ke={name:"CourseControl",props:["deviceid"],components:{},data(){return{indicatorthickness:10}},setup(e){return{roboStore:T(e.deviceid),nodusedmodel:Q(10)}},computed:{indicatortangle(){return this.roboStore.desiredcourse-Math.round(this.indicatorthickness/2)}},methods:{updatedesiredcourse(e){var o=this.roboStore.desiredcourse+e;o>180&&(o-=360),o<-180&&(o+=360),o=Math.ceil(o/5)*5,this.roboStore.setdesiredcourse(o)}}},He={class:"column items-center justify-end"},Ee={class:""},Oe=b("div",{class:"text-subtitle2"},"Course \xB0",-1),We={class:"text-subtitle2"},Je={class:"column items-center justify-end"},Le={class:""},Xe=b("div",{class:"text-subtitle2"},"Course \xB0",-1),Ye={class:"text-subtitle2"};function Ze(e,o,i,t,u,r){return t.roboStore.isManual?(m(),v(E,{key:0,"show-value":"",class:"text-white generic-hover-transition",size:"8em",color:"white","center-color":"primary","track-color":"transparent","font-size":"0.30em",thickness:.1,min:0,max:360,"model-value":t.nodusedmodel,value:u.indicatorthickness,step:5,angle:r.indicatortangle,"onUpdate:modelValue":r.updatedesiredcourse},{default:n(()=>[b("div",He,[b("div",Ee,S(t.roboStore.desiredcourse),1),Oe,b("div",We,"gps "+S(t.roboStore.gpscourse)+" \xB0",1)])]),_:1},8,["model-value","value","angle","onUpdate:modelValue"])):(m(),v(E,{key:1,readonly:"","show-value":"",class:"text-white generic-hover-transition",size:"8em",color:"white","center-color":"primary","track-color":"transparent","font-size":"0.30em",thickness:.1,min:0,max:360,"model-value":t.nodusedmodel,value:u.indicatorthickness,step:5,angle:t.roboStore.currentcourse,"onUpdate:modelValue":r.updatedesiredcourse},{default:n(()=>[b("div",Je,[b("div",Le,S(t.roboStore.currentcourse),1),Xe,b("div",Ye,"gps "+S(t.roboStore.gpscourse)+" \xB0",1)])]),_:1},8,["model-value","value","angle","onUpdate:modelValue"]))}var et=V(Ke,[["render",Ze]]);const tt={name:"ThrustControl",props:["deviceid"],components:{},data(){return{indicatorthickness:10}},setup(e){return{roboStore:T(e.deviceid),nodusedmodel:Q(10)}},methods:{setsurge(e){e=Math.ceil(e/2)*2,this.roboStore.setsurge(e)}}},ot={class:"column items-center justify-end"},rt={class:""},at=b("div",{class:"text-subtitle2"},"Thrust",-1),nt={class:"text-subtitle2"};function lt(e,o,i,t,u,r){return m(),v(E,{readonly:!t.roboStore.isManual,"show-value":"",class:"text-white",size:"8em",color:"green","center-color":"primary","track-color":"transparent","font-size":"0.30em",thickness:.1,min:0,max:t.roboStore.vmax+1,"model-value":t.nodusedmodel,value:t.roboStore.surge,"onUpdate:modelValue":r.setsurge,step:2},{default:n(()=>[b("div",ot,[b("div",rt,S(t.roboStore.surge),1),at,b("div",nt,S(t.roboStore.gpsspeed)+"kt",1)]),l($,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:n(()=>[N("Thrust")]),_:1})]),_:1},8,["readonly","max","model-value","value","onUpdate:modelValue"])}var st=V(tt,[["render",lt]]),it=I({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:o}){const i=s(()=>{const t=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(u=>e[u]===!0).map(u=>`q-btn-group--${u}`).join(" ");return`q-btn-group row no-wrap${t.length!==0?" "+t:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>B("div",{class:i.value},Me(o.default))}});const ut={name:"ModeControl",props:["deviceid"],components:{},setup(e){return{roboStore:T(e.deviceid)}}};function ct(e,o,i,t,u,r){return m(),v(it,{push:"",glossy:""},{default:n(()=>[t.roboStore.isAuto?(m(),v(_,{key:0,label:"Auto",icon:t.roboStore.autoIcon,color:"primary",size:"sm"},null,8,["icon"])):(m(),v(_,{key:1,label:"Auto",icon:t.roboStore.autoIcon,size:"sm",onClick:o[0]||(o[0]=c=>t.roboStore.setmode("auto"))},null,8,["icon"])),t.roboStore.isHold?(m(),v(_,{key:2,label:"Hold",icon:"pause",color:"primary",size:"sm"})):(m(),v(_,{key:3,label:"Hold",icon:"pause",size:"sm",onClick:o[1]||(o[1]=c=>t.roboStore.setmode("hold"))})),t.roboStore.isStopped?(m(),v(_,{key:4,label:"",icon:"stop",color:"red",size:"sm"})):(m(),v(_,{key:5,label:"",icon:"stop",size:"sm",onClick:o[2]||(o[2]=c=>t.roboStore.setmode("stop"))})),t.roboStore.isManual?(m(),v(_,{key:6,label:"Manual",icon:"swipe",color:"green",size:"sm"})):(m(),v(_,{key:7,label:"Manual",icon:"swipe",size:"sm",onClick:o[3]||(o[3]=c=>t.roboStore.setmode("manual"))}))]),_:1})}var dt=V(ut,[["render",ct]]);const mt={name:"RobobuoyStatus",props:["deviceid"],components:{MarkNumber:qe,BatteryStatus:Fe,GPSStatus:Ge,SignalStatus:Ue,CourseControl:et,ThrustControl:st,ModeControl:dt},setup(e){return{roboStore:T(e.deviceid)}}},vt={class:"row no-wrap shadow-1"};function bt(e,o,i,t,u,r){const c=z("MarkNumber"),k=z("BatteryStatus"),h=z("GPSStatus"),x=z("SignalStatus"),M=z("router-link"),C=z("CourseControl"),P=z("ThrustControl"),d=z("ModeControl");return m(),v(xe,{flat:"",bordered:"",square:"",class:ee(e.$q.dark.isActive?"bg-grey-9":"bg-grey-2")},{default:n(()=>[b("div",vt,[l(J,{class:"col-6"},{default:n(()=>[l(c,{number:t.roboStore.number},null,8,["number"]),l(be,null,{default:n(()=>[N(S(t.roboStore.name),1)]),_:1})]),_:1}),l(J,{class:"col-6"},{default:n(()=>[l(Be),l(k,{battery:t.roboStore.battery},null,8,["battery"]),l(h,{positionvalid:t.roboStore.positionvalid},null,8,["positionvalid"]),l(x,{signalstrength:t.roboStore.localrssi},null,8,["signalstrength"]),l(M,{to:{name:"robobuoysettings",params:{deviceid:t.roboStore.deviceid}}},{default:n(()=>[l(_,{flat:"",round:"",dense:"",color:"white",icon:"settings"},{default:n(()=>[l($,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:n(()=>[N("Settings")]),_:1})]),_:1})]),_:1},8,["to"])]),_:1})]),l(L,{class:"fit row no-wrap justify-evenly"},{default:n(()=>[l(C,{deviceid:t.roboStore.deviceid},null,8,["deviceid"]),l(P,{deviceid:t.roboStore.deviceid},null,8,["deviceid"])]),_:1}),l(L,{class:"fit row no-wrap justify-evenly"},{default:n(()=>[l(d,{deviceid:t.roboStore.deviceid},null,8,["deviceid"])]),_:1})]),_:1},8,["class"])}var Ct=V(mt,[["render",bt]]);export{re as Q,Ct as R};
